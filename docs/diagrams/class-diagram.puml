@startuml
class PgOrmFacade {
    - pool: Pool
    + static fromConfig(config): PgOrmFacade
    + synchronize(): Promise<void>
    + close(): Promise<void>
}

class Pool {
    + query(text, params): Promise
    + end(): Promise
}

class EntityMetadata {
    + tableName: string
    + columns: ColumnMetadata[]
    + relations: RelationMetadata[]
    + ctor: Function
}

class ColumnMetadata {
    + name: string
    + type: string
    + nullable: boolean
    + primary: boolean
}

class RelationMetadata {
    + kind: string
    + target: Function
    + joinColumn: RelationJoinColumn
}

class EntityStore {
    + entityMetadata: Map<Function, EntityMetadata>
    + ensureEntityMetadata(ctor): EntityMetadata
}

PgOrmFacade --> Pool
PgOrmFacade ..> EntityStore
EntityStore *-- EntityMetadata
EntityMetadata *-- ColumnMetadata
EntityMetadata *-- RelationMetadata
@enduml
